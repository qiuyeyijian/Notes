> 学习Vim时，用到的一些命令



###  删除多行

```bash
:set nu				//显示行号
:20,30d				//删除第20-30行
:set nonmber		//不显示行号
```

### 撤销

```
u			//撤销上一步操作
```

###  复制粘贴

1、复制

```
1）单行复制
在命令模式下，将光标移动到将要复制的行处，按“yy”进行复制；
2）多行复制 在命令模式下，将光标移动到将要复制的首行处，按“nyy”复制n行；其中n为1、2、3……
```

2、粘贴

```
在命令模式下，将光标移动到将要粘贴的行处，按“p”进行粘贴
```

### 将vim置于后台

`Ctrl + z` 可以将vim 置于后台

`fg`命令可以调回

###  定位某行

vim 下 输入`:/字符串`，接着按`n`查找下一个，跳转上一个匹配N

```
:/hello
```

搜索之后，我们打开文件，发现搜索的字符被高亮了，可以取消

```bash
:nohlsearch
```

或者

```bash
:set nohlsearch
```



### Vim 的3种工作模式

一般模式（指令模式）

编辑模式

命令行模式



### 一般模式

| 一般模式下移动光标 |                        |
| ------------------ | ---------------------- |
| h 或左方向键       | 向左移动一个字符       |
| j 或下方向键       | 向下移动一个字符       |
| k 或上方向键       | 向上移动一个字符       |
| l 或右方向键       | 向右移动一个字符       |
| PgUp 或 Ctrl + b   | 向上翻一页             |
| PgDn 或 Ctrl + f   | 向下翻一页             |
| G                  | 光标移动到文本的最末行 |
| nG  (n 是数字)     | 光标移动到文本的第n 行 |
| gg                 | 光标移动到文本的首行   |



| 一般模式下删除、复制和粘贴 |                                                    |
| :------------------------- | :------------------------------------------------- |
| x,X                        | x为向后删除一个字符，X为向前删除一个字符           |
| dd                         | 删除光标所在的那一行                               |
| ndd (n 是数字)             | 删除光标所在的向下n行                              |
| yy                         | 复制光标所在的那一行                               |
| nyy (n 是数字)             | 复制光标所在行开始的向下n行                        |
| yG                         | 复制光标所在行到末行的所有数据                     |
| p,P                        | p将复制的数据从光标下一行粘贴，P则从光标上一行粘贴 |
| u                          | 撤销一步操作                                       |
| Ctrl + r                   | 重复上一个操作                                     |
| -                          | 重复前一个操作                                     |

| 一般模式下的查找与替换 |                                                              |
| ---------------------- | :----------------------------------------------------------- |
| /keyword               | 向光标之后寻找名为keyword的字符串，当找到第一个keyword后，该单词高亮显示，按下“n” 继续查找下一个，按下“N”反方向查找下一个 |
| ?keyword               | 向光标之后寻找名为keyword的字符串，当找到第一个keyword后，该单词高亮显示，按下“n” 继续查找下一个，按下“N”反方向查找下一个 |
| :n1,n2s/word1/word2/g  | 在n1和n2行之间查找word1字符串并替换为word2                   |
| :1,$s/word1/word2/g    | 从第一行到最末行，查找word1并替换word2                       |
| :1,$s/word1/word2/gc   | 从第一行到最末行，查找word1并替换word2,替换之前需要用户确认  |

| 从一般模式进入编辑模式 |                            |
| ---------------------- | -------------------------- |
| i                      | 在光标前插入字符           |
| I                      | 在光标所在行的行首插入字符 |
| a                      | 在光标后插入字符           |
| A                      | 在光标所在行的行末插入字符 |
| o                      | 在光标所在行下插入新的一行 |
| O                      | 在光标所在行上插入新的一行 |

比较常用就是小`i`和小`o`

### 命令行模式

| 命令行模式           |                                                              |
| -------------------- | ------------------------------------------------------------ |
| :w                   | 保存文本                                                     |
| :w!                  | 如果文件属性为只读是，强制保存                               |
| :q                   | 退出vim                                                      |
| :q!                  | 前置退出vim, 不管编辑还是未编辑都不保存退出                  |
| :wq                  | 保存之后退出                                                 |
| :e!                  | 将文档还原成最原始的状态                                     |
| ZZ                   | 等价于:wq                                                    |
| :w [filename]        | 将文档另存为 filename                                        |
| :set nu              | 在每行行首设置行号                                           |
| :set nonu            | 取消行号                                                     |
| :n1, n2 w [filename] | 将n1 到 n2 行的内容另存为 filename 文件中                    |
| :! command           | 暂时离开vim, 执行某个Linux命令，例如：`! ls /home`暂时列出/home下的文件，然后会提示按回车返回vim |



### Linux 下Vim配置

在根目录下新建`.vimrc`文件，此文件是Vim的配置文件。在里面输入下面内容：

```bash
set tabstop=4 
set softtabstop=4 
set shiftwidth=4 
set noexpandtab 
set nu  
set autoindent 
set cindent

"自动补全
:inoremap ( ()<ESC>i
:inoremap ) <c-r>=ClosePair(')')<CR>
:inoremap { {<CR>}<ESC>O
:inoremap } <c-r>=ClosePair('}')<CR>
:inoremap [ []<ESC>i
:inoremap ] <c-r>=ClosePair(']')<CR>
:inoremap " ""<ESC>i
:inoremap ' ''<ESC>i
function! ClosePair(char)
    if getline('.')[col('.') - 1] == a:char
        return "\<Right>"
    else
        return a:char
    endif
endfunction
```

> * Tabstop: 表示一个 tab 显示出来是多少个空格的长度默认 8。
>
> * Softtabstop: 表示在编辑模式的时候按退格键的时候退回缩进的长度当使用 expandtab 时特别有用。
>
> * Shiftwidth: 表示每一级缩进的长度一般设置成跟 softtabstop 一样。 当设置成 expandtab 时缩进用空格来表示，noexpandtab 则是用制表符表示一个缩进。
>
> - Nu: 表示显示行号。
> - Autoindent: 表示自动缩进。
> - Cindent: 是特别针对C语言自动缩进。

编辑完成后，保存退出，输入下面命令使配置文件生效

```bash
source ~/.vimrc
```

