

有四个计算型的进程P1、P2、P3、P4依次紧接着进入就绪队列，它们需要处理器的时间分别为P1（53）、P2（17）、P3（68）、P4（24）。所有进程均进入就绪队列后开始采用时间片轮转调度算法进行调度，时间片长度为20，忽略所有系统开销。

⑴请给出进程执行过程。

⑵给出每个进程的开始执行时间、结束时间和周转时间。





下面的解答有问题（注意是依次紧接着进入就绪队列），周转时间分别是134，37， 162， 121



![img](%E4%BD%9C%E4%B8%9A%E9%A2%98.assets/0C61CED313B6CBB42175615D9D0A4493.jpg)





若后备作业队列中有等待运行的三个作业J1、J2、J3，已知它们各自的运行时间为a、b、c，且满足a<b<c，试证明采用短作业优先算法调度能获得最小的平均周转时间。



![img](%E4%BD%9C%E4%B8%9A%E9%A2%98.assets/900278BF820350E8E3EC5E180B857EA1.jpg)



单道批处理系统中有三道作业，各作业的（提交时间，估计运行时间）分别为J1（10:00，120min）、J2（10:10，60min）和J3（10:25，25min）。分别给出采用FCFS算法和HRRF算法进行调度时各作业的开始运行时间、完成时间、周转时间和带权周转时间，并计算平均周转时间和平均带权周转时间。



![img](%E4%BD%9C%E4%B8%9A%E9%A2%98.assets/B0447181A688EAF45B8DFA0AAE963ACE.jpg)



如果限制为两道的多道程序系统中，有4个作业进入系统，各作业的（到达时间，估计运行时间）分别为J1（10:00，30min）、J2（10:05，20min）、J3（10:10，5min）和J4（10:20，10min），系统作业调度采用短作业优先算法，进程调度采用最短剩余时间优先算法，请给出各作业进入内存时间、开始运行时间、结束运行时间、周转时间和带权周转时间。



![img](%E4%BD%9C%E4%B8%9A%E9%A2%98.assets/D63C4BF2027C81610462ABC1ADFB9A86.jpg)





### 第三次作业



物理地址、动态地址重定位、碎片、程序局部性、虚拟存储器、抖动、页面替换、进程工作集



#### 物理地址

在存储器里以字节为单位存储信息，为正确地存放或取得信息，每一个字节单元给以一个唯一的存储器地址，成为物理地址



#### 动态地址重定位

在程序运行过程中要访问数据时再进行逻辑地址与物理地址的变换，即逐指令执行时完成地址映射

#### 碎片

内部碎片：指RAM系统或外部存储空间供应过多，而没有被操作系统或应用程序使用的一种碎片类型

外部碎片：当应用程序或进程从内存或外部存储系统中删除，且未立即重新分配使用的空间



#### 程序局部性

指程序在执行时呈现出局部性规律，即在一段时间内，整个程序的执行仅限于程序中的某一部分。相应地，执行所访问的存储空间也局限于某个内存区域。



#### 虚拟存储器

虚拟内存是计算机系统内存管理的一种技术。它使得应用程序认为他拥有连续的可用的内存，而实际上，他通常是被分割多个物理内存碎片，好友部分暂时存在外部磁盘存储器上，在需要时进行数据交换。



#### 抖动

在请求分页存储管理中，从主存（DRAM)中刚刚换出（Swap Out）某一页面后（换出Disk），根据请求马上又换人（Swap In）该页， 这种反复换出换入的现象。



#### 页面替换

在地址映射过程中，若在页面中发现所要访问的页面不在内存中，则产生缺页中断。当发生缺页中断时，如果操作系统内存中没有空闲页面，则操作系统必须在内存选择一个页面将其移出内存，以便为即将调入的页面让出空间



#### 进程工作集

因为频繁的调页操作引起的磁盘*I/O*会大大降低程序的运行效率，因此对每一个进程，虚拟内存管理器都会将其一定量的内存页驻留在物理内存中。并跟踪其执行的性能指标，动态调整这个数量。*Win32*中驻留在物理内存中的内存页称为进程的 "工作集"



#### 简述存储管理的主要功能

重定位

存储空间的分配和回收

存储保护

存储扩充

#### 简述页式存储管理的基本思想。

只需将作业的全部信息作为副本存放在磁盘上， 作业被调度投入到运行时，至少把第一页信息装入主存储器，在作业执行过程中访问到不在主存储器的页的时候，再把它们装入到主存。



#### 简述段式存储管理技术和页式存储管理技术的不同之处

页式存储管理和段式存储管理的共同点体现在两者都采用离散分配方式，且都要通过地址映射机构来实现地址变换。但在概念上两者完全不同，其主要区别表现在以下三点：

  ①  页是信息的物理单位，页式管理是为实现离散分配方式，以减少内存的外零头，提高内存的利用率，或者说，页式管理是出于系统管理的需要；而段是信息的逻辑单位，含有一组意义相对完整的信息，段式管理的目的是为了能更好地满足用户的需要。

  ②  页的大小固定且由系统确定，逻辑地址由页号和页内地址组成，可由机器硬件实现；段长不固定，取决于用户所编写的程序，通常由编译程序在对源程序进行编译时，根据信息的性质来划分。

  ③  页式管理中，进程地址空间是一维的，是单一的线性地址空间；而段式管理中，进程地址空间是二维的，程序员在标识一个地址时，既需给出段名，又需给出段内地址。

#### 简述实现虚拟存储器必须解决的问题。

抖动



#### 简述影响缺页中断率的因素

分配给作业的内存块数

页面的大小

快表的大小

程序的编制方法

页面调度算法的选取



#### 什么是Belady异常?请给出一个Belady异常的例子

**所谓Belady现象是指：采用FIFO算法时，如果对—个进程未分配它所要求的全部页面，有时就会出现分配的页面数增多但缺页率反而提高的异常现象。**  

​      **Belady现象的原因是FIFO算法的置换特征与进程访问内存的动态特征是矛盾的，即被置换的页面并不是进程不会访问的。 先进先出算法(FIFO)。选择装入最早的页面置换。可以通过链表来表示各页的装入时间先后。FIFO的性能较差，因为较早调入的页往往是经常被访问的页，这些页在FIFO算法下被反复调入和调出，并且有Belady现象.**





![image-20200406210454630](%E4%BD%9C%E4%B8%9A%E9%A2%98.assets/image-20200406210454630.png)







某虚存拟存储器的用户编程空间共32个页面，每页为1KB，内存为16KB。假定某时刻一用户页表中已调入内存的页面的页号和物理块号的对照表如下表：
页 号 物理块号
0 5
1 10
2 4
3 7
4 2
5 3
6 8

则逻辑地址0A5CH对应的物理地址为 ?
答:按分页存储管理的思想，逻辑空间分页，内存空间分块，块的大小与页面的大小相同，为1KB（400H）。由于0A5CH=400H*2+25CH,所以逻辑地址0A5CH对应的页号为2,页内位移为25CH。
根据页表可知页号2对应的物理块号为4，物理块号为4的块首地址为400*4=1000（H），因此块首地址+块内位移=1000H+25CH=125CH，为逻辑地址0A5CH所对应的物理地址。
同理可得：逻辑地址103CH所对应的物理地址为：83CH。
逻辑地址1A5CH所对应的物理地址为：345CH。





物理地址20位,内存空间大小就是2^20=1MB
逻辑地址对页面大小的整除结果就是页号 块的大小与页大小一样为1KB
这里已经说了页号大小占六位
逻辑地址的位数就是页号的位数加上页大小的位数 等于6+10=16位
0420H=2^10+2^5整除2^10就是页大小得出1 1 就是页号
说明放在7块中 对应的物理地址就是 前面就是7KB 2^11+2^12+2^10
页内地址就是逻辑地址MOD页面大小就是2^5
2^11+2^12+2^5转化为16进制地址就是1C20H
逻辑地址16位 所以作业最大长度就是2^16位=64KB





假定某磁盘的旋转速度是每周20 ms，格式化时每个盘面被分成10个扇区，现有10个逻辑记录存放在同一磁道上，安排如下表所示。

处理程序要顺序处理这些记录，每读出一个记录后处理程序要花一定的时间进行处理，然后再顺序读下一个记录并处理，直到处理完这些记录。假定定位第一个记录需要花费1/2周的定位时间，对于处理时间为1 ms、3ms和3.5 ms，请分别回答：

⑴顺序处理完这10个记录共需花费多少时间？



⑵请给出一种记录优化分布的方案，使处理程序能在最短时间内处理完这10个记录，并计算优化分布后需要花费的时间。 